{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Downloads/3rdSemester-assg/todo-nextjs/src/components/TodoItem.tsx"],"sourcesContent":["'use client';\r\nimport { useState } from 'react';\r\nimport type { Todo } from '@/types/todo';\r\n\r\ninterface Props {\r\n  todo: Todo;\r\n  onToggle: (id: number, completed: boolean) => void;\r\n  onEdit: (id: number, newText: string) => void;\r\n  onDelete: (id: number) => void;\r\n}\r\n\r\nexport default function TodoItem({ todo, onToggle, onEdit, onDelete }: Props) {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editText, setEditText] = useState(todo.todo);\r\n\r\n  const handleEdit = () => {\r\n    if (isEditing) {\r\n      if (editText.trim()) {\r\n        onEdit(todo.id, editText);\r\n        setIsEditing(false);\r\n      }\r\n    } else {\r\n      setIsEditing(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <li className=\"flex items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow\">\r\n      {isEditing ? (\r\n        <input\r\n          type=\"text\"\r\n          value={editText}\r\n          onChange={(e) => setEditText(e.target.value)}\r\n          onBlur={handleEdit}\r\n          onKeyDown={(e) => e.key === 'Enter' && handleEdit()}\r\n          className=\"flex-1 p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          autoFocus\r\n        />\r\n      ) : (\r\n        <span\r\n          className={`flex-1 cursor-pointer p-2 ${\r\n            todo.completed ? 'line-through text-gray-500' : 'text-gray-900'\r\n          }`}\r\n        >\r\n          {todo.todo}\r\n        </span>\r\n      )}\r\n\r\n      <button\r\n        onClick={() => onToggle(todo.id, !todo.completed)}\r\n        className={`ml-4 px-3 py-1 rounded text-sm font-medium transition-colors ${\r\n          todo.completed\r\n            ? 'bg-green-100 text-green-800 hover:bg-green-200'\r\n            : 'bg-red-100 text-red-800 hover:bg-red-200'\r\n        }`}\r\n      >\r\n        {todo.completed ? 'Completed' : 'Incomplete'}\r\n      </button>\r\n\r\n      <button\r\n        onClick={handleEdit}\r\n        className=\"ml-2 text-blue-700 hover:text-blue-400 px-2 py-1 text-sm font-medium\"\r\n      >\r\n        {isEditing ? 'Save' : 'Edit'}\r\n      </button>\r\n\r\n      <button\r\n        onClick={() => {\r\n          if (confirm('Delete this todo?')) onDelete(todo.id);\r\n        }}\r\n        className=\"ml-2 text-red-500 hover:text-red-700 px-2 py-1 text-sm font-medium\"\r\n      >\r\n        Delete\r\n      </button>\r\n    </li>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AADA;;;AAWe,SAAS,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAS;IAC1E,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC,KAAK,IAAI;IAElD,MAAM,aAAa;QACjB,IAAI,WAAW;YACb,IAAI,SAAS,IAAI,IAAI;gBACnB,OAAO,KAAK,EAAE,EAAE;gBAChB,aAAa;YACf;QACF,OAAO;YACL,aAAa;QACf;IACF;IAEA,qBACE,8OAAC;QAAG,WAAU;;YACX,0BACC,8OAAC;gBACC,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gBAC3C,QAAQ;gBACR,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;gBACvC,WAAU;gBACV,SAAS;;;;;qCAGX,8OAAC;gBACC,WAAW,CAAC,0BAA0B,EACpC,KAAK,SAAS,GAAG,+BAA+B,iBAChD;0BAED,KAAK,IAAI;;;;;;0BAId,8OAAC;gBACC,SAAS,IAAM,SAAS,KAAK,EAAE,EAAE,CAAC,KAAK,SAAS;gBAChD,WAAW,CAAC,6DAA6D,EACvE,KAAK,SAAS,GACV,mDACA,4CACJ;0BAED,KAAK,SAAS,GAAG,cAAc;;;;;;0BAGlC,8OAAC;gBACC,SAAS;gBACT,WAAU;0BAET,YAAY,SAAS;;;;;;0BAGxB,8OAAC;gBACC,SAAS;oBACP,IAAI,QAAQ,sBAAsB,SAAS,KAAK,EAAE;gBACpD;gBACA,WAAU;0BACX;;;;;;;;;;;;AAKP","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Downloads/3rdSemester-assg/todo-nextjs/src/components/TodoList.tsx"],"sourcesContent":["'use client';\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport TodoItem from './TodoItem';\r\nimport type { Todo, ApiResponse } from '@/types/todo';\r\n\r\nconst todoApi = {\r\n  getTodos: async (page: number, limit: number, search: string, status: string) => {\r\n    const params = new URLSearchParams({\r\n      page: page.toString(),\r\n      limit: limit.toString(),\r\n      ...(search && { search }),\r\n      ...(status && { status }),\r\n    });\r\n    const res = await fetch(`/api/todos?${params}`);\r\n    if (!res.ok) throw new Error('Failed to fetch todos');\r\n    return res.json() as Promise<ApiResponse<Todo>>;\r\n  },\r\n  addTodo: async (todo: string) => {\r\n    const res = await fetch('/api/todos', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ todo }),\r\n    });\r\n    if (!res.ok) throw new Error('Failed to add todo');\r\n    return res.json();\r\n  },\r\n  updateTodo: async (id: number, data: { todo?: string; completed?: boolean }) => {\r\n    const res = await fetch(`/api/todos/${id}`, {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!res.ok) throw new Error('Failed to update todo');\r\n    return res.json();\r\n  },\r\n  deleteTodo: async (id: number) => {\r\n    const res = await fetch(`/api/todos/${id}`, { method: 'DELETE' });\r\n    if (!res.ok) throw new Error('Failed to delete todo');\r\n  },\r\n};\r\n\r\nexport default function TodoList() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const queryClient = useQueryClient();\r\n\r\n  const [newTodo, setNewTodo] = useState('');\r\n  const [searchText, setSearchText] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('');\r\n\r\n  const page = parseInt(searchParams.get('page') || '1');\r\n  const limit = 5;\r\n\r\n  const { data, isLoading, error } = useQuery({\r\n    queryKey: ['todos', page, limit, searchText, filterStatus],\r\n    queryFn: () => todoApi.getTodos(page, limit, searchText, filterStatus),\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n\r\n  const addMutation = useMutation({\r\n    mutationFn: todoApi.addTodo,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['todos'] });\r\n      setNewTodo('');\r\n      router.push('?page=1');\r\n    },\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: ({ id, data }: { id: number; data: any }) => todoApi.updateTodo(id, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['todos'] });\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: todoApi.deleteTodo,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['todos'] });\r\n    },\r\n  });\r\n\r\n  const handleAddTodo = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!newTodo.trim()) return;\r\n    addMutation.mutate(newTodo.trim());\r\n  };\r\n\r\n  const handleToggle = (id: number, completed: boolean) => {\r\n    updateMutation.mutate({ id, data: { completed } });\r\n  };\r\n\r\n  const handleEdit = (id: number, todo: string) => {\r\n    updateMutation.mutate({ id, data: { todo } });\r\n  };\r\n\r\n  const handleDelete = (id: number) => {\r\n    deleteMutation.mutate(id);\r\n  };\r\n\r\n  const totalPages = data ? Math.max(1, Math.ceil(data.total / limit)) : 1;\r\n\r\n  if (isLoading) return <div className=\"text-center py-8\">Loading...</div>;\r\n  if (error) return <div className=\"text-center py-8 text-red-500\">Error loading todos</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto p-4 bg-[#3a66bf]\">\r\n      <h1 className=\"text-2xl sm:text-3xl font-bold mb-6 text-center\">Todo List</h1>\r\n\r\n      {/* Add Todo Form */}\r\n      <form onSubmit={handleAddTodo} className=\"mb-6 flex flex-col sm:flex-row gap-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter a new task...\"\r\n          value={newTodo}\r\n          onChange={(e) => setNewTodo(e.target.value)}\r\n          className=\"flex-1 font-medium p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          disabled={addMutation.isPending}\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          disabled={addMutation.isPending || !newTodo.trim()}\r\n          className=\"bg-gray-50 font-bold py-3 px-6 rounded-lg hover:bg-blue-200 disabled:opacity-50\"\r\n        >\r\n          {addMutation.isPending ? 'Adding...' : 'Add Task'}\r\n        </button>\r\n      </form>\r\n\r\n      {/* Search & Filter */}\r\n      <div className=\"mb-6 flex flex-col sm:flex-row gap-4\">\r\n        <input\r\n          type=\"search\"\r\n          placeholder=\"Search by title...\"\r\n          value={searchText}\r\n          onChange={(e) => setSearchText(e.target.value)}\r\n          className=\"flex-1 p-3 font-medium border border-gray-300 rounded-lg\"\r\n        />\r\n        <select\r\n          value={filterStatus}\r\n          onChange={(e) => {\r\n            setFilterStatus(e.target.value);\r\n            router.push('?page=1');\r\n          }}\r\n          className=\"p-3 font-medium border border-gray-300 rounded-lg\"\r\n        >\r\n          <option value=\"\">All</option>\r\n          <option value=\"completed\">Completed</option>\r\n          <option value=\"incomplete\">Incomplete</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Todo Items */}\r\n      <ul className=\"space-y-4 mb-6\">\r\n        {!data || data.data.length === 0 ? (\r\n          <li className=\"text-center py-8 font-bold text-[#f1bcbc]\">NO TODOS FOUND.</li>\r\n        ) : (\r\n          data.data.map((todo) => (\r\n            <TodoItem\r\n              key={todo.id}\r\n              todo={todo}\r\n              onToggle={handleToggle}\r\n              onEdit={handleEdit}\r\n              onDelete={handleDelete}\r\n            />\r\n          ))\r\n        )}\r\n      </ul>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <nav className=\"flex justify-center items-center gap-4 text-sm\">\r\n          <button\r\n            disabled={page === 1}\r\n            onClick={() => router.push('?page=1')}\r\n            className=\"px-3 py-2 font-medium bg-gray-300 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            « Back to page 1\r\n          </button>\r\n          <button\r\n            disabled={page === 1}\r\n            onClick={() => router.push(`?page=${page - 1}`)}\r\n            className=\"px-3 py-2 font-medium bg-gray-300 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            ‹ Prev\r\n          </button>\r\n          <span className=\"px-3 py-2 font-medium\">\r\n            Page {page} of {totalPages}\r\n          </span>\r\n          <button\r\n            disabled={page === totalPages}\r\n            onClick={() => router.push(`?page=${page + 1}`)}\r\n            className=\"px-3 py-2 font-medium bg-gray-300 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            Next ›\r\n          </button>\r\n        </nav>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}